CREATE TABLE ORDER_HIST (

    ORD_DT      VARCHAR2(10),
    MEDIA_CD    NUMBER(3),
    ORD_AMT     NUMBER(10)

);

INSERT INTO ORDER_HIST VALUES ('20190801', 10, 25000);
INSERT INTO ORDER_HIST VALUES ('20190801', 20, 40000);
INSERT INTO ORDER_HIST VALUES ('20190801', 20, 32000);
INSERT INTO ORDER_HIST VALUES ('20190801', 10, 12000);
INSERT INTO ORDER_HIST VALUES ('20190801', 30, 8000);
INSERT INTO ORDER_HIST VALUES ('20190802', 30, 7900);
INSERT INTO ORDER_HIST VALUES ('20190802', 30, 25000);
INSERT INTO ORDER_HIST VALUES ('20190802', 30, 250000);
INSERT INTO ORDER_HIST VALUES ('20190802', 10, 31000);
INSERT INTO ORDER_HIST VALUES ('20190802', 10, 22800);
INSERT INTO ORDER_HIST VALUES ('20190803', 10, 17500);
INSERT INTO ORDER_HIST VALUES ('20190803', 30, 29000);
INSERT INTO ORDER_HIST VALUES ('20190803', 30, 76000);
INSERT INTO ORDER_HIST VALUES ('20190803', 30, 10000);

SELECT * FROM ORDER_HIST ORDER BY ORD_DT;

DELETE FROM ORDER_HIST WHERE ORD_DT='20190801';
COMMIT;

-- 출력값의 VALUE는 초를 뜻함 (ex. VALUE가 900이라면 900초, 즉 15분 동안의 DML 내역이 저장되어 있다는 것)
SHOW PARAMETER UNDO_RETENTION;

INSERT INTO ORDER_HIST
 SELECT * FROM ORDER_HIST
 AS OF TIMESTAMP (SYSTIMESTAMP-INTERVAL '15' MINUTE)
 WHERE ORD_DT='20190801';
 
SELECT * FROM ORDER_HIST ORDER BY ORD_DT;